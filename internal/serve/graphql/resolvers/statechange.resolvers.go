package resolvers

// This file will be automatically regenerated based on the schema, any resolver implementations
// will be copied through when generating and any unknown code will be moved to the end.
// Code generated by github.com/99designs/gqlgen version v0.17.76

import (
	"context"
	"fmt"

	"github.com/stellar/wallet-backend/internal/indexer/types"
	graphql1 "github.com/stellar/wallet-backend/internal/serve/graphql/generated"
)

// Type is the resolver for the type field.
func (r *accountChangeResolver) Type(ctx context.Context, obj *types.AccountStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *accountChangeResolver) Reason(ctx context.Context, obj *types.AccountStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *accountChangeResolver) Account(ctx context.Context, obj *types.AccountStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *accountChangeResolver) Operation(ctx context.Context, obj *types.AccountStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *accountChangeResolver) Transaction(ctx context.Context, obj *types.AccountStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// FunderAddress is the resolver for the funderAddress field.
func (r *accountChangeResolver) FunderAddress(ctx context.Context, obj *types.AccountStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.FunderAccountID), nil
}

// Type is the resolver for the type field.
func (r *balanceAuthorizationChangeResolver) Type(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *balanceAuthorizationChangeResolver) Reason(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *balanceAuthorizationChangeResolver) Account(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *balanceAuthorizationChangeResolver) Operation(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *balanceAuthorizationChangeResolver) Transaction(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// TokenID is the resolver for the tokenId field.
func (r *balanceAuthorizationChangeResolver) TokenID(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.TokenID), nil
}

// LiquidityPoolID is the resolver for the liquidityPoolId field.
func (r *balanceAuthorizationChangeResolver) LiquidityPoolID(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.LiquidityPoolID), nil
}

// Flags is the resolver for the flags field.
// Decodes the bitmask value to a slice of flag name strings.
func (r *balanceAuthorizationChangeResolver) Flags(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) ([]string, error) {
	if !obj.Flags.Valid {
		return []string{}, nil
	}
	return types.DecodeBitmaskToFlags(obj.Flags.Int16), nil
}

// KeyValue is the resolver for the keyValue field.
func (r *balanceAuthorizationChangeResolver) KeyValue(ctx context.Context, obj *types.BalanceAuthorizationStateChangeModel) (*string, error) {
	return r.resolveJSONBField(obj.KeyValue)
}

// Type is the resolver for the type field.
func (r *flagsChangeResolver) Type(ctx context.Context, obj *types.FlagsStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *flagsChangeResolver) Reason(ctx context.Context, obj *types.FlagsStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *flagsChangeResolver) Account(ctx context.Context, obj *types.FlagsStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *flagsChangeResolver) Operation(ctx context.Context, obj *types.FlagsStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *flagsChangeResolver) Transaction(ctx context.Context, obj *types.FlagsStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// Flags is the resolver for the flags field.
// Decodes the bitmask value to a slice of flag name strings.
func (r *flagsChangeResolver) Flags(ctx context.Context, obj *types.FlagsStateChangeModel) ([]string, error) {
	if !obj.Flags.Valid {
		return []string{}, nil
	}
	return types.DecodeBitmaskToFlags(obj.Flags.Int16), nil
}

// Type is the resolver for the type field.
func (r *metadataChangeResolver) Type(ctx context.Context, obj *types.MetadataStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *metadataChangeResolver) Reason(ctx context.Context, obj *types.MetadataStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *metadataChangeResolver) Account(ctx context.Context, obj *types.MetadataStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *metadataChangeResolver) Operation(ctx context.Context, obj *types.MetadataStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *metadataChangeResolver) Transaction(ctx context.Context, obj *types.MetadataStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// KeyValue is the resolver for the keyValue field.
func (r *metadataChangeResolver) KeyValue(ctx context.Context, obj *types.MetadataStateChangeModel) (string, error) {
	return r.resolveRequiredJSONBField(obj.KeyValue)
}

// Type is the resolver for the type field.
func (r *reservesChangeResolver) Type(ctx context.Context, obj *types.ReservesStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *reservesChangeResolver) Reason(ctx context.Context, obj *types.ReservesStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *reservesChangeResolver) Account(ctx context.Context, obj *types.ReservesStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *reservesChangeResolver) Operation(ctx context.Context, obj *types.ReservesStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *reservesChangeResolver) Transaction(ctx context.Context, obj *types.ReservesStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// SponsoredAddress is the resolver for the sponsoredAddress field.
func (r *reservesChangeResolver) SponsoredAddress(ctx context.Context, obj *types.ReservesStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.SponsoredAccountID), nil
}

// SponsorAddress is the resolver for the sponsorAddress field.
func (r *reservesChangeResolver) SponsorAddress(ctx context.Context, obj *types.ReservesStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.SponsorAccountID), nil
}

// LiquidityPoolID is the resolver for the liquidityPoolID field.
func (r *reservesChangeResolver) LiquidityPoolID(ctx context.Context, obj *types.ReservesStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.LiquidityPoolID), nil
}

// ClaimableBalanceID is the resolver for the claimableBalanceID field.
func (r *reservesChangeResolver) ClaimableBalanceID(ctx context.Context, obj *types.ReservesStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.ClaimableBalanceID), nil
}

// SponsoredTrustline is the resolver for the sponsoredTrustline field.
func (r *reservesChangeResolver) SponsoredTrustline(ctx context.Context, obj *types.ReservesStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.TokenID), nil
}

// SponsoredData is the resolver for the sponsoredData field.
func (r *reservesChangeResolver) SponsoredData(ctx context.Context, obj *types.ReservesStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.SponsoredData), nil
}

// KeyValue is the resolver for the keyValue field.
func (r *reservesChangeResolver) KeyValue(ctx context.Context, obj *types.ReservesStateChangeModel) (*string, error) {
	return r.resolveJSONBField(obj.KeyValue)
}

// Type is the resolver for the type field.
func (r *signerChangeResolver) Type(ctx context.Context, obj *types.SignerStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *signerChangeResolver) Reason(ctx context.Context, obj *types.SignerStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *signerChangeResolver) Account(ctx context.Context, obj *types.SignerStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *signerChangeResolver) Operation(ctx context.Context, obj *types.SignerStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *signerChangeResolver) Transaction(ctx context.Context, obj *types.SignerStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// SignerAddress is the resolver for the signerAddress field.
func (r *signerChangeResolver) SignerAddress(ctx context.Context, obj *types.SignerStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.SignerAccountID), nil
}

// SignerWeights is the resolver for the signerWeights field.
// Formats the old/new signer weight values as a JSON object for backward compatibility.
func (r *signerChangeResolver) SignerWeights(ctx context.Context, obj *types.SignerStateChangeModel) (*string, error) {
	if !obj.SignerWeightOld.Valid && !obj.SignerWeightNew.Valid {
		return nil, nil
	}
	// Format as {"old": X, "new": Y} for backward compatibility with JSONB format
	result := fmt.Sprintf(`{"old": %d, "new": %d}`, obj.SignerWeightOld.Int16, obj.SignerWeightNew.Int16)
	return &result, nil
}

// Type is the resolver for the type field.
func (r *signerThresholdsChangeResolver) Type(ctx context.Context, obj *types.SignerThresholdsStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *signerThresholdsChangeResolver) Reason(ctx context.Context, obj *types.SignerThresholdsStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *signerThresholdsChangeResolver) Account(ctx context.Context, obj *types.SignerThresholdsStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *signerThresholdsChangeResolver) Operation(ctx context.Context, obj *types.SignerThresholdsStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *signerThresholdsChangeResolver) Transaction(ctx context.Context, obj *types.SignerThresholdsStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// Thresholds is the resolver for the thresholds field.
// Formats the old/new threshold values as a JSON object for backward compatibility.
func (r *signerThresholdsChangeResolver) Thresholds(ctx context.Context, obj *types.SignerThresholdsStateChangeModel) (string, error) {
	// Format as {"old": "X", "new": "Y"} for backward compatibility with JSONB format
	// Values are stored as ints but returned as quoted strings in JSON (0-255 range)
	return fmt.Sprintf(`{"old": "%d", "new": "%d"}`, obj.ThresholdOld.Int16, obj.ThresholdNew.Int16), nil
}

// Type is the resolver for the type field.
func (r *standardBalanceChangeResolver) Type(ctx context.Context, obj *types.StandardBalanceStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *standardBalanceChangeResolver) Reason(ctx context.Context, obj *types.StandardBalanceStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *standardBalanceChangeResolver) Account(ctx context.Context, obj *types.StandardBalanceStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *standardBalanceChangeResolver) Operation(ctx context.Context, obj *types.StandardBalanceStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *standardBalanceChangeResolver) Transaction(ctx context.Context, obj *types.StandardBalanceStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// TokenID is the resolver for the tokenId field.
func (r *standardBalanceChangeResolver) TokenID(ctx context.Context, obj *types.StandardBalanceStateChangeModel) (string, error) {
	return r.resolveRequiredString(obj.TokenID), nil
}

// Amount is the resolver for the amount field.
func (r *standardBalanceChangeResolver) Amount(ctx context.Context, obj *types.StandardBalanceStateChangeModel) (string, error) {
	return r.resolveRequiredString(obj.Amount), nil
}

// Type is the resolver for the type field.
func (r *trustlineChangeResolver) Type(ctx context.Context, obj *types.TrustlineStateChangeModel) (types.StateChangeCategory, error) {
	return obj.StateChangeCategory, nil
}

// Reason is the resolver for the reason field.
func (r *trustlineChangeResolver) Reason(ctx context.Context, obj *types.TrustlineStateChangeModel) (types.StateChangeReason, error) {
	return *obj.StateChangeReason, nil
}

// Account is the resolver for the account field.
func (r *trustlineChangeResolver) Account(ctx context.Context, obj *types.TrustlineStateChangeModel) (*types.Account, error) {
	return r.resolveStateChangeAccount(ctx, obj.ToID, obj.StateChangeOrder)
}

// Operation is the resolver for the operation field.
func (r *trustlineChangeResolver) Operation(ctx context.Context, obj *types.TrustlineStateChangeModel) (*types.Operation, error) {
	return r.resolveStateChangeOperation(ctx, obj.ToID, obj.StateChangeOrder)
}

// Transaction is the resolver for the transaction field.
func (r *trustlineChangeResolver) Transaction(ctx context.Context, obj *types.TrustlineStateChangeModel) (*types.Transaction, error) {
	return r.resolveStateChangeTransaction(ctx, obj.ToID, obj.StateChangeOrder)
}

// TokenID is the resolver for the tokenId field.
func (r *trustlineChangeResolver) TokenID(ctx context.Context, obj *types.TrustlineStateChangeModel) (*string, error) {
	return r.resolveNullableString(obj.TokenID), nil
}

// Limit is the resolver for the limit field.
// Formats the old/new trustline limit values as a JSON object for backward compatibility.
func (r *trustlineChangeResolver) Limit(ctx context.Context, obj *types.TrustlineStateChangeModel) (*string, error) {
	if !obj.TrustlineLimitOld.Valid && !obj.TrustlineLimitNew.Valid {
		return nil, nil
	}
	// Format old/new as JSON for backward compatibility with JSONB format
	oldVal := "null"
	newVal := "null"
	if obj.TrustlineLimitOld.Valid {
		oldVal = fmt.Sprintf(`"%s"`, obj.TrustlineLimitOld.String)
	}
	if obj.TrustlineLimitNew.Valid {
		newVal = fmt.Sprintf(`"%s"`, obj.TrustlineLimitNew.String)
	}
	result := fmt.Sprintf(`{"old": %s, "new": %s}`, oldVal, newVal)
	return &result, nil
}

// KeyValue is the resolver for the keyValue field.
func (r *trustlineChangeResolver) KeyValue(ctx context.Context, obj *types.TrustlineStateChangeModel) (*string, error) {
	return r.resolveJSONBField(obj.KeyValue)
}

// AccountChange returns graphql1.AccountChangeResolver implementation.
func (r *Resolver) AccountChange() graphql1.AccountChangeResolver { return &accountChangeResolver{r} }

// BalanceAuthorizationChange returns graphql1.BalanceAuthorizationChangeResolver implementation.
func (r *Resolver) BalanceAuthorizationChange() graphql1.BalanceAuthorizationChangeResolver {
	return &balanceAuthorizationChangeResolver{r}
}

// FlagsChange returns graphql1.FlagsChangeResolver implementation.
func (r *Resolver) FlagsChange() graphql1.FlagsChangeResolver { return &flagsChangeResolver{r} }

// MetadataChange returns graphql1.MetadataChangeResolver implementation.
func (r *Resolver) MetadataChange() graphql1.MetadataChangeResolver {
	return &metadataChangeResolver{r}
}

// ReservesChange returns graphql1.ReservesChangeResolver implementation.
func (r *Resolver) ReservesChange() graphql1.ReservesChangeResolver {
	return &reservesChangeResolver{r}
}

// SignerChange returns graphql1.SignerChangeResolver implementation.
func (r *Resolver) SignerChange() graphql1.SignerChangeResolver { return &signerChangeResolver{r} }

// SignerThresholdsChange returns graphql1.SignerThresholdsChangeResolver implementation.
func (r *Resolver) SignerThresholdsChange() graphql1.SignerThresholdsChangeResolver {
	return &signerThresholdsChangeResolver{r}
}

// StandardBalanceChange returns graphql1.StandardBalanceChangeResolver implementation.
func (r *Resolver) StandardBalanceChange() graphql1.StandardBalanceChangeResolver {
	return &standardBalanceChangeResolver{r}
}

// TrustlineChange returns graphql1.TrustlineChangeResolver implementation.
func (r *Resolver) TrustlineChange() graphql1.TrustlineChangeResolver {
	return &trustlineChangeResolver{r}
}

type (
	accountChangeResolver              struct{ *Resolver }
	balanceAuthorizationChangeResolver struct{ *Resolver }
	flagsChangeResolver                struct{ *Resolver }
	metadataChangeResolver             struct{ *Resolver }
	reservesChangeResolver             struct{ *Resolver }
	signerChangeResolver               struct{ *Resolver }
	signerThresholdsChangeResolver     struct{ *Resolver }
	standardBalanceChangeResolver      struct{ *Resolver }
	trustlineChangeResolver            struct{ *Resolver }
)
